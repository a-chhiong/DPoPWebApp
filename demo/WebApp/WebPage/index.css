/**
 * 1. THE NATIVE APP FOUNDATION
 * We set up the root and html to handle mobile notches and 
 * the dynamic nature of mobile browser toolbars.
 */
:root {
    --safe-top: env(safe-area-inset-top, 0px);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
}

html {
    /* Layer 1 Fallback: Immediate flicker protection */
    background-color: #1a1a1a; 
    
    /* Ensure the background fills the entire screen regardless of URL bars */
    height: 100%;
    min-height: 100vh;
    min-height: 100dvh; /* Modern browsers: Dynamic Viewport Height */
    
    /* Fix for older iOS height logic */
    height: -webkit-fill-available;
    
    /* Smooth theme transitions */
    transition: background-color 0.3s ease;
}

body {
    margin: 0;
    padding: 0;
    min-height: 100%;
    /* Stop the "rubber-band" bounce effect at the edges */
    overscroll-behavior: none;
    /* Remove the gray tap highlight box on mobile Safari/Chrome */
    -webkit-tap-highlight-color: transparent;
}

/**
 * 2. THE THEME ENGINE
 * Once ThemeManager applies the class, we transition to design tokens.
 */
html.sl-theme-light {
    background-color: #ffffff; 
    background-color: var(--sl-color-neutral-0); 
}

html.sl-theme-dark {
    background-color: #1a1a1a; 
    background-color: var(--sl-color-neutral-0);
}

/**
 * 3. THE CLOAK & REVEAL
 * Ensures the user doesn't see "raw" unstyled HTML before JS loads.
 */
app-shell:not([resolved]) {
    display: none;
}

app-shell[resolved] {
    display: block;
    animation: fadeIn 0.4s ease-in-out forwards;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/**
 * 4. MOBILE-SPECIFIC GESTURE CONTROL
 * We allow desktop zoom/selection but lock it down for the mobile "App" feel.
 */
@media (max-width: 768px) {
    body {
        /* Prevents accidental text selection when tapping buttons */
        user-select: none;
        -webkit-user-select: none;
        
        /* pan-x pan-y allows normal scrolling but blocks the 
           pinch-to-zoom gesture on the body level */
        touch-action: pan-x pan-y; 
    }
}

/**
 * 5. UTILITY CLASSES
 * Standardized spacing and layout helpers.
 */
.flex { display: flex; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.text-right { text-align: right; }

.gap-2 { gap: 0.5rem; }
.gap-4 { gap: 1rem; }
.gap-6 { gap: 1.5rem; }

.grid { display: grid; }
@media (min-width: 768px) {
  .md\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
  .md\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
}

.p-4 { padding: 1rem; }
.p-6 { padding: 1.5rem; }
.mb-8 { margin-bottom: 2rem; }
.mt-2 { margin-top: 0.5rem; }
.mt-8 { margin-top: 2rem; }

.min-h-screen { min-height: 100vh; min-height: 100dvh; }

/**
 * 6. UI OVERLAYS
 */
.loader-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

/* Global transitions for interactive elements */
sl-card, sl-input, sl-button, sl-switch {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}